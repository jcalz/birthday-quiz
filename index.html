<html>
<head>
  <title>Birthday Quiz</title>
<style>
html {
  font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
  font-size: 1.5em;
}

#hints {
  font-style: italic;
  font-size: 0.7em;
}

span.locked {
  font-color: red;
}

textarea,
input,
select {
    font-size: inherit;
    font-weight: inherit;
    text-decoration: none;
    font-family: inherit;
}

#question img {
  max-width: 70vw;
  max-height: 50vh;
  height: auto;
  width: auto;
}
</style>


</head>
<body>
<div>
  <h2>Karen & Tim Hirsch Birthday Challenge</h2>
  <form id="form" action="javascript:void(0);">
    <span id="note">Answer the question below:</span><br>
    <b>Q:</b> <span id="question">Question</span>
    <span id="hints"></span><br>
    <b>A:</b> <input id="answer" autocomplete="off"> 
    <input type="submit" value="submit" ><br>
  </form>
</div>


<script>
var _a, _b, _c, _d;
const questions = [
    {
        question: "What is two plus two?",
        imageUrl: "https://i.imgur.com/uD7x0n9.jpg",
        answers: ["Four", "4"],
        hints: ["not 3", "not 5"]
    } /* , {
        question: "",
        imageUrl: "",
        answers: [""],
        hints: [""]
    }*/
];
function getElement(id, type) {
    const elem = document.getElementById(id);
    if (!(elem instanceof type)) {
        throw new Error('Element "' + id + (elem ? '" is not a ' + type.name : '" not found'));
    }
    return elem;
}
const questionElem = getElement("question", HTMLSpanElement);
const hintsElem = getElement("hints", HTMLElement);
const answerElem = getElement("answer", HTMLInputElement);
const noteElem = getElement("note", HTMLSpanElement);
const form = getElement("form", HTMLFormElement);
form.addEventListener("submit", processForm);
function log(x) {
    console.log(x);
    return x;
}
function parseDateISOString(s) {
    let ds = s.split(/\D/).map(s => parseInt(s));
    ds[1] = ds[1] - 1; // adjust month
    return new Date(...ds).getTime();
}
let qNum = (_b = +((_a = localStorage.getItem("qNumX")) !== null && _a !== void 0 ? _a : "0")) !== null && _b !== void 0 ? _b : 0;
let tryCount = (_d = +((_c = localStorage.getItem("tryCountX")) !== null && _c !== void 0 ? _c : "0")) !== null && _d !== void 0 ? _d : 0;
if (location.href.indexOf("reset") >= 0) {
    qNum = 0; // start over
}
function displayQuestion(i) {
    var _a;
    if (i >= questions.length) {
        questionElem.innerHTML = "<h2>CONGRATULATIONS!</h2>You've won a homemade dinner by Nancy, Demerise, and Joey!";
        answerElem.disabled = true;
        hintsElem.innerHTML = "";
        return;
    }
    const hints = "<br>\n" + ((_a = questions[i].hints) !== null && _a !== void 0 ? _a : []).slice(0, Math.floor(tryCount / 5)).map(h => "Hint: " + h + "<br>\n").join("");
    hintsElem.innerHTML = hints;
    const imgText = questions[i].imageUrl;
    questionElem.innerHTML = questions[i].question +
        (imgText ? "<br><img src=\"" + imgText + "\">" : "");
}
displayQuestion(qNum);
function normalizeAnswer(x) {
    return x
        .trim()
        .toLowerCase()
        .replaceAll(/[^a-z0-9 ]/g, "").replaceAll(/ +/g, ' ');
}
async function processForm() {
    const answer = normalizeAnswer(answerElem.value);
    if (!answer)
        return;
    const found = questions[qNum].answers.find(a => normalizeAnswer(a) === answer);
    answerElem.value = "";
    if (!found) {
        noteElem.innerText = "No, sorry.  Try again.";
        tryCount++;
    }
    else {
        noteElem.innerText = "Correct!";
        tryCount = 0;
        qNum++;
    }
    localStorage.setItem("qNumX", String(qNum));
    localStorage.setItem("tryCountX", String(tryCount));
    displayQuestion(qNum);
}
</script>
</body>
</html>
